<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SoundVault Search Results</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white min-h-screen p-6">
  <h1 class="text-2xl font-bold mb-4">Search Results</h1>

  <div id="results" class="grid grid-cols-6 gap-4"></div>

  <script>
    async function loadResults() {
      const params = new URLSearchParams(window.location.search);
      const query = params.get("q");
      if (!query) return;

      const res = await fetch(`http://localhost:3000/search?q=${encodeURIComponent(query)}`);
      const data = await res.json();

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      if (data.success && data.results.length > 0) {
        data.results.forEach(album => {
          resultsDiv.innerHTML += `
          <a href="review.html?id=${album.mbid}" class="bg-gray-900 rounded p-2 hover:bg-gray-800">
              <div class="aspect-square bg-gray-700 flex items-center justify-center rounded">
                ${album.cover_url 
                  ? `<img src="${album.cover_url}" class="w-full h-full object-cover rounded">`
                  : `<span class="text-gray-500">No Cover</span>`}
              </div>
              <p class="mt-2 font-bold truncate">${album.title}</p>
              <p class="text-sm text-gray-400 truncate">${album.artist}</p>
            </a>
          `;
        });
      } else {
        resultsDiv.innerHTML = "<p class='text-gray-400'>No results found</p>";
      }
    }

    loadResults();
  </script>
</body>
</html>
